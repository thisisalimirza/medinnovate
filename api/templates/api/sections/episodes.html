{% load static %}

<section class="episodes" id="episodes">
    <div class="container">
        {% if featured_episodes %}
        <h2>Featured Episodes</h2>
        <div class="episode-list">
            {% for episode in featured_episodes %}
            <div class="episode-card">
                <a href="{% url 'episode_detail' episode.episode_number %}" class="episode-card-link">
                    <div class="episode-content">
                        <span class="episode-number">Episode {{ episode.episode_number }}</span>
                        <div class="title-row">
                            <h3 class="episode-title">{{ episode.title }}</h3>
                            <span class="duration">{{ episode.duration }} min</span>
                        </div>
                        <p class="episode-description">{{ episode.description|truncatechars:150 }}</p>
                        <time datetime="{{ episode.publication_date|date:'Y-m-d' }}" class="episode-date">
                            {{ episode.publication_date|date:"F j, Y" }}
                        </time>
                    </div>
                </a>
                {% if episode.spotify_url %}
                <a href="{{ episode.spotify_url }}" target="_blank" rel="noopener noreferrer" class="play-button" onclick="event.stopPropagation();">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <h2>Latest Episodes</h2>
        <div class="episode-list">
            {% for episode in latest_episodes %}
            <div class="episode-card">
                <a href="{% url 'episode_detail' episode.episode_number %}" class="episode-card-link">
                    <div class="episode-content">
                        <span class="episode-number">Episode {{ episode.episode_number }}</span>
                        <div class="title-row">
                            <h3 class="episode-title">{{ episode.title }}</h3>
                            <span class="duration">{{ episode.duration }} min</span>
                        </div>
                        <p class="episode-description">{{ episode.description|truncatechars:150 }}</p>
                        <time datetime="{{ episode.publication_date|date:'Y-m-d' }}" class="episode-date">
                            {{ episode.publication_date|date:"F j, Y" }}
                        </time>
                    </div>
                </a>
                {% if episode.spotify_url %}
                <a href="{{ episode.spotify_url }}" target="_blank" rel="noopener noreferrer" class="play-button" onclick="event.stopPropagation();">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</section> 